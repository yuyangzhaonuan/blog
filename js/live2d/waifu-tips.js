"use strict";function initWidget(t,e){function o(){Math.random()<.6&&d.length>0?a(d[Math.floor(Math.random()*d.length)],6e3,9):$.getJSON("https://v1.hitokoto.cn",function(t){var e='这句一言来自 <span style="color:#0099cc;">『'+t.from+'』</span>，是 <span style="color:#0099cc;">'+t.creator+"</span> 在 hitokoto.cn 投稿的。";a(t.hitokoto,6e3,9),setTimeout(function(){a(e,4e3,9)},6e3)})}function a(t,e,o){t&&(!sessionStorage.getItem("waifu-text")||sessionStorage.getItem("waifu-text")<=o)&&(u&&(clearTimeout(u),u=null),Array.isArray(t)&&(t=t[Math.floor(Math.random()*t.length)]),sessionStorage.setItem("waifu-text",o),$("#waifu-tips").stop().html(t).fadeTo(200,1),u=setTimeout(function(){sessionStorage.removeItem("waifu-text"),$("#waifu-tips").fadeTo(1e3,0)},e))}function n(t,e){localStorage.setItem("modelId",t),void 0===e&&(e=0),localStorage.setItem("modelTexturesId",e),loadlive2d("live2d",f+"/get/?id="+t+"-"+e,console.log("live2d","模型 "+t+"-"+e+" 加载完成"))}function i(){var t=localStorage.getItem("modelId"),e=localStorage.getItem("modelTexturesId");$.ajax({cache:!1,url:f+"/rand_textures/?id="+t+"-"+e,dataType:"json",success:function(o){1!=o.textures.id||1!=e&&0!=e?a("我的新衣服好看嘛？",4e3,10):a("我还没有其他衣服呢！",4e3,10),n(t,o.textures.id)}})}function l(){var t=localStorage.getItem("modelId");$.ajax({cache:!1,url:f+"/switch/?id="+t,dataType:"json",success:function(t){n(t.model.id),a(t.model.message,4e3,10)}})}if(!(screen.width<=768||localStorage.getItem("waifu-display")&&(new Date).getTime()-localStorage.getItem("waifu-display")<=864e5)){localStorage.removeItem("waifu-display"),sessionStorage.removeItem("waifu-text"),$("body").append('<div id="waifu">\n\t\t\t<div id="waifu-tips"></div>\n\t\t\t<canvas id="live2d" width="150" height="150"></canvas>\n\t\t\t<div id="waifu-tool">\n\t\t\t\t<span class="fa fa-lg fa-comment"></span>\n\t\t\t\t<span class="fa fa-lg fa-user-circle"></span>\n\t\t\t\t<span class="fa fa-lg fa-street-view"></span>\n\t\t\t\t<span class="fa fa-lg fa-times"></span>\n\t\t\t</div>\n\t\t</div>'),$("#waifu-tool .fa-comment").click(o),$("#waifu-tool .fa-paper-plane").click(function(){var t=document.createElement("script");document.body.appendChild(t),t.src="https://galaxymimi.com/js/asteroids.js"}),$("#waifu-tool .fa-user-circle").click(l),$("#waifu-tool .fa-street-view").click(i),$("#waifu-tool .fa-camera-retro").click(function(){a("照好了嘛，是不是很可爱呢？",6e3,9),window.Live2D.captureName="photo.png",window.Live2D.captureFrame=!0}),$("#waifu-tool .fa-info-circle").click(function(){window.open("https://github.com/stevenjoezhang/live2d-widget")}),$("#waifu-tool .fa-times").click(function(){localStorage.setItem("waifu-display",(new Date).getTime()),a("愿你有一天能与重要的人重逢。",2e3,11),$("#waifu").animate({bottom:-500},3e3,function(){$("#waifu").hide()})});var c=/x/;console.log(c),c.toString=function(){return a("哈哈，你打开了控制台，是想要看看我的秘密吗？",6e3,9),""},$(document).on("copy",function(){a("你都复制了些什么呀，转载要记得加上出处哦！",6e3,9)}),$(document).on("visibilitychange",function(){document.hidden||a("哇，你终于回来了～",6e3,9)}),function(){var t,e=location.port?location.protocol+"//"+location.hostname+":"+location.port+"/":location.protocol+"//"+location.hostname+"/";if(location.href==e){var o=(new Date).getHours();t=o>23||o<=5?"你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？":o>5&&o<=7?"早上好！一日之计在于晨，美好的一天就要开始了。":o>7&&o<=11?"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！":o>11&&o<=14?"中午了，工作了一个上午，现在是午餐时间！":o>14&&o<=17?"午后很容易犯困呢，今天的运动目标完成了吗？":o>17&&o<=19?"傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红～":o>19&&o<=21?"晚上好，今天过得怎么样？":o>21&&o<=23?["已经这么晚了呀，早点休息吧，晚安～","深夜时要爱护眼睛呀！"]:"好久不见，日子过得好快呢……"}else if(""!==document.referrer){var n=document.createElement("a");n.href=document.referrer;var i=n.hostname.split(".")[1];t=location.hostname==n.hostname?'欢迎阅读<span style="color:#0099cc;">『'+document.title.split(" - ")[0]+"』</span>":"baidu"==i?'Hello！来自 百度搜索 的朋友<br/>你是搜索 <span style="color:#0099cc;">'+n.search.split("&wd=")[1].split("&")[0]+"</span> 找到的我吗？":"so"==i?'Hello！来自 360搜索 的朋友<br/>你是搜索 <span style="color:#0099cc;">'+n.search.split("&q=")[1].split("&")[0]+"</span> 找到的我吗？":"google"==i?'Hello！来自 谷歌搜索 的朋友<br/>欢迎阅读<span style="color:#0099cc;">『'+document.title.split(" - ")[0]+"』</span>":'Hello！来自 <span style="color:#0099cc;">'+n.hostname+"</span> 的朋友"}else t='欢迎阅读<span style="color:#0099cc;">『'+document.title.split(" - ")[0]+"』</span>";a(t,7e3,8)}();var s=!1,r=null,u=null,d=["已经过了这么久了呀，日子过得好快呢……","使用Chrome可以获得最佳浏览体验哦！","嗨～快来逗我玩吧！","拿小拳拳锤你胸口！"],f="";$(".fa-share-alt").is(":hidden")&&d.push("记得把小家加入Adblock白名单哦！"),$(document).mousemove(function(){s=!0}).keydown(function(){s=!0}),setInterval(function(){s?(s=!1,clearInterval(r),r=null):r||(r=setInterval(o,25e3))},1e3),function(){t=t||"/waifu-tips.json",f=e||"";var o=localStorage.getItem("modelId"),i=localStorage.getItem("modelTexturesId");if(null==o)var o=1,i=53;n(o,i),$.getJSON(t,function(t){$.each(t.mouseover,function(t,e){$(document).on("mouseover",e.selector,function(){var t=Array.isArray(e.text)?e.text[Math.floor(Math.random()*e.text.length)]:e.text;t=t.replace("{text}",$(this).text()),a(t,4e3,8)})}),$.each(t.click,function(t,e){$(document).on("click",e.selector,function(){var t=Array.isArray(e.text)?e.text[Math.floor(Math.random()*e.text.length)]:e.text;t=t.replace("{text}",$(this).text()),a(t,4e3,8)})}),$.each(t.seasons,function(t,e){var o=new Date,a=e.date.split("-")[0],n=e.date.split("-")[1]||a;if(a.split("/")[0]<=o.getMonth()+1&&o.getMonth()+1<=n.split("/")[0]&&a.split("/")[1]<=o.getDate()&&o.getDate()<=n.split("/")[1]){var i=Array.isArray(e.text)?e.text[Math.floor(Math.random()*e.text.length)]:e.text;i=i.replace("{year}",o.getFullYear()),d.push(i)}})})}()}}